function getFuncParameters(e){if("function"==typeof e){var t=/[^(]+\(([^)]*)?\)/gm.exec(Function.prototype.toString.call(e));if(t[1]){var n=t[1].replace(/[^,\w]*/g,"").split(",");return n}}}function addNewSort(){var e=prompt("请输入任务分类名字：",""),t=-1!==e.indexOf("<script")||-1!==e.indexOf("<iframe")||-1!==e.indexOf("<img")||-1!==e.indexOf("<video")||-1!==e.indexOf("<audio")||-1!==e.indexOf("<base")||-1!==e.indexOf("<form");if(t&&alert("请输入有效的任务分类名字！"),null!==e&&""!==e&&!t){var n=document.getElementsByClassName("selected")[0],s=n.getAttribute("id"),a=oStorage.getItem(s),l=document.createElement("li"),i=document.getElementsByClassName("li-select");null===a&&(a=""),a=a+"$"+e,oStorage.setItem(s,a),l.innerHTML='<img class="li-img" src="images/file.png">'+e+'<span>(0)</span><img class="delete" src="images/delete.png">',l.setAttribute("id",e),0!==i.length&&i[0].setAttribute("class",""),l.setAttribute("class","li-select"),n.getElementsByTagName("ul")[0].appendChild(l),clearTaskList(),loadAllSortTask(),l.onclick=function(e){var e=window.event||e;e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,addEventToNewSort(l)},l.onmouseover=function(){if(isGetClass)var e=this.getElementsByClassName("delete")[0];else var e=document.getElementsByClassName("delete",this)[0];e.style.opacity=1,e.onclick=function(e){var t=this,e=window.event||e;e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,addEventToDeleteSort(t,s,l)}},l.onmouseout=function(){if(isGetClass)var e=this.getElementsByClassName("delete")[0];else var e=document.getElementsByClassName("delete",this)[0];e.style.opacity=0}}}function addEventToNewSort(e){var t=document.getElementsByClassName("li-select");0===t.length?(e.setAttribute("class","li-select"),e.parentNode.parentNode.setAttribute("class","selected")):(t[0].setAttribute("class",""),e.setAttribute("class","li-select"),t[0].parentNode.parentNode.setAttribute("class",""),e.parentNode.parentNode.setAttribute("class","selected")),clearTaskList(),loadAllSortTask()}function addEventToDeleteSort(e,t,n){var s=confirm("确认删除该类别？");if(s){var a=e.parentNode,l=a.parentNode.parentNode,i=oStorage.getItem(l.getAttribute("id"));i=i.replace("$"+a.getAttribute("id"),""),oStorage.setItem(l.getAttribute("id"),i),a.parentNode.removeChild(a),deleteTaskContent(t,n.getAttribute("id")),document.getElementById(t).getElementsByTagName("ul")[0].innerHTML="",loadClassificationData("ife")&&loadClassificationData("graduation")&&loadClassificationData("association")&&loadClassificationData("family")&&loadClassificationData("other"),selectDefaultClass(),clearTaskList(),loadAllSortTask(),displayAllTaskNum()}}function addNewTask(){var e=document.getElementsByClassName("li-select");if(0!==e.length){for(var t=0;4>t;t++)document.getElementById(arrDescript[t]).style.display="none";document.getElementById(arrDescript[3]).style.display="block";var n=document.getElementById(arrDescript[3]);if(isGetClass)var s=n.getElementsByClassName("sure")[0],a=n.getElementsByClassName("quit")[0],l=n.getElementsByClassName("task-title")[0],i=n.getElementsByClassName("time")[0],m=n.getElementsByClassName("task-content")[0];else var s=document.getElementsByClassName("sure",n)[0],a=document.getElementsByClassName("quit",n)[0],l=document.getElementsByClassName("task-title",n)[0],i=document.getElementsByClassName("time",n)[0],m=document.getElementsByClassName("task-content",n)[0];if(l.value="",i.value="",m.value="",!isPlaceholer()){l.getAttribute("placeholder"),i.getAttribute("placeholder"),m.getAttribute("placeholder");placeholder(l),placeholder(i),placeholder(m)}s.onclick=function(){addEventToSureBtn(n)},a.onclick=function(){for(var e=0;4>e;e++)0!==e&&(document.getElementById(arrDescript[e]).style.display="none");document.getElementById(arrDescript[0]).style.display="block";var t=document.getElementById(arrDescript[0]);isGetClass?(t.getElementsByClassName("task-title")[0].innerHTML="",t.getElementsByTagName("time")[0].innerHTML="",t.getElementsByClassName("task-content")[0].innerHTML=""):(document.getElementsByClassName("task-title",t)[0].innerHTML="",t.getElementsByTagName("time")[0].innerHTML="",document.getElementsByClassName("task-content",t)[0].innerHTML="")}}else alert("请选择一个任务分类或者新建一个任务分类！")}function isPlaceholer(){var e=document.createElement("input");return"placeholder"in e}function placeholder(e){var t=e.getAttribute("placeholder");e.defaultValue;e.value=t,e.onfocus=function(){this.value==t&&(this.value="")},e.onblur=function(){""==this.value&&(this.value=t)}}function addEventToSureBtn(e){if(isGetClass)var t=e.getElementsByClassName("task-title")[0].value,n=e.getElementsByClassName("time")[0].value,s=e.getElementsByClassName("task-content")[0].value;else var t=document.getElementsByClassName("task-title",e)[0].value,n=document.getElementsByClassName("time",e)[0].value,s=document.getElementsByClassName("task-content",e)[0].value;var a=isInputTaskRight(t,s);if(isRepeat(t)&&alert("标题不能重复，请重新输入！"),isRightDate(n)&&a&&!isRepeat(t)){var l=document.getElementsByClassName("selected")[0],i=document.getElementsByClassName("li-select")[0],m=oStorage.getItem(l.getAttribute("id")+"content"),r=l.getAttribute("id");null===m&&(m="");var o=m+"&"+i.getAttribute("id")+"^"+t+"^"+n+"^"+s;oStorage.setItem(l.getAttribute("id")+"content",o),clearTaskList(),loadAllSortTask(),displayTaskContent(l,i,arrDescript,t),updateTaskNum(r,i.getAttribute("id")),displayAllTaskNum()}}function isInputTaskRight(e,t){var n=-1!==e.indexOf("^")||-1!==e.indexOf("$")||-1!==e.indexOf("$"),s=-1!==t.indexOf("^")||-1!==t.indexOf("$")||-1!==t.indexOf("$"),a=-1!==e.indexOf("<script")||-1!==e.indexOf("<iframe")||-1!==e.indexOf("<img")||-1!==e.indexOf("<video")||-1!==e.indexOf("<audio")||-1!==e.indexOf("<base")||-1!==e.indexOf("<form"),l=-1!==t.indexOf("<script")||-1!==t.indexOf("<iframe")||-1!==t.indexOf("<img")||-1!==t.indexOf("<video")||-1!==t.indexOf("<audio")||-1!==t.indexOf("<base")||-1!==t.indexOf("<form");return e.length>15&&alert("标题字数不能超过15个字！"),(n||s)&&alert("标题或者内容中不能包括$、&、^字符！"),(a||l)&&alert("请输入合法的标题或内容！"),t.length>500&&alert("内容字数不能超过500个字！"),!(e.length<=15&&t.length<=500)||n||s||a||l?!1:!0}function isRepeat(e){var t=oStorage.getItem("ifecontent"),n=oStorage.getItem("graduationcontent"),s=oStorage.getItem("associationcontent"),a=oStorage.getItem("familycontent"),l=oStorage.getItem("othercontent");if(null!==t)var i=-1!==t.indexOf(e);if(null!==n)var m=-1!==n.indexOf(e);if(null!==s)var r=-1!==s.indexOf(e);if(null!==a)var o=-1!==a.indexOf(e);if(null!==l)var c=-1!==l.indexOf(e);return i||m||r||o||c?!0:!1}function isRightDate(e){var t=/^(\d{4})-(\d{2})-(\d{2})$/;t.exec(e);return!t.test(e)||RegExp.$2>12||RegExp.$3>31?(alert("请保证输入的日期格式为yyyy-mm-dd且日期正确!"),!1):!0}function loadClassificationData(e){if(null!==oStorage.getItem(e)&&""!==oStorage.getItem(e)){var t=oStorage.getItem(e),n=t.split("$"),s=document.getElementById(e),a=s.getElementsByTagName("ul")[0],l=0,i=document.getElementsByClassName("selected");0!==i.length&&i[0].setAttribute("class",""),s.setAttribute("class","selected");for(var m=1;m<n.length;m++)!function(t){var s=document.createElement("li"),i=getTaskNum(e,n[t]);l+=i,s.innerHTML='<img class="li-img" src="images/file.png">'+n[t]+"<span>("+i+')</span><img class="delete" src="images/delete.png">',s.setAttribute("id",n[t]),a.appendChild(s),s.onclick=function(e){var e=window.event||e;e&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,addEventToNewSort(s)},s.onmouseover=function(){var t=this;if(isGetClass)var n=this.getElementsByClassName("delete")[0];else var n=document.getElementsByClassName("delete",t)[0];n.style.opacity=1,n.onclick=function(t){var n=this,t=window.event||t;t&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,addEventToDeleteSort(n,e,s)}},s.onmouseout=function(){var e=this;if(isGetClass)var t=this.getElementsByClassName("delete")[0];else var t=document.getElementsByClassName("delete",e)[0];t.style.opacity=0}}(m);return isGetClass?s.getElementsByClassName("all-num")[0].innerHTML="("+l+")":document.getElementsByClassName("all-num",s)[0].innerHTML="("+l+")",!1}return!0}function clearTaskList(){var e=document.getElementsByClassName("li-time")[0];e.innerHTML=""}function loadAllSortTask(){var e=document.getElementsByClassName("selected")[0],t=document.getElementsByClassName("li-select");if(isGetClass?(document.getElementById("ife").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),document.getElementById("graduation").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),document.getElementById("association").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),document.getElementById("family").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),document.getElementById("other").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),document.getElementById(e.getAttribute("id")).getElementsByClassName("li-img")[0].setAttribute("src","images/folder_white.png")):(document.getElementsByClassName("li-img",document.getElementById("ife"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",document.getElementById("graduation"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",document.getElementById("association"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",document.getElementById("family"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",document.getElementById("other"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",document.getElementById(e.getAttribute("id")))[0].setAttribute("src","images/folder_white.png")),document.getElementsByClassName("checked")[0].setAttribute("class",""),document.getElementById("all-task").setAttribute("class","checked"),0!==t.length){var n=t[0],s=n.getAttribute("id"),a=oStorage.getItem(e.getAttribute("id")+"content");if(null!==a&&""!==a){if(0!==a.length){for(var l=a.split("&"),i=[],m=[],r=[],o=1;o<l.length;o++){var c=l[o].toString().split("^");i[o-1]=c[2],m[o-1]=c[1],r[o-1]=c[0]}var g=i,d=[];i=uniqArray(i),i=squenceTime(i);for(var o=0;o<i.length;o++){d[o]=i[o];for(var u=0;u<m.length;u++)i[o]===g[u]&&(d[o]=d[o]+"^"+r[u]+"^"+m[u])}for(var y=document.getElementsByClassName("li-time")[0],E="",o=0;o<d.length;o++)if(d[o].split("^")[1]===s){E=d[o].split("^")[2];break}if(""!==E)displayTaskContent(e,n,arrDescript,E);else{for(var o=0;4>o;o++)0!==o&&(document.getElementById(arrDescript[o]).style.display="none");document.getElementById(arrDescript[0]).style.display="block";var B=document.getElementById(arrDescript[0]);isGetClass?(B.getElementsByClassName("task-title")[0].innerHTML="",B.getElementsByTagName("time")[0].innerHTML="",B.getElementsByClassName("task-content")[0].innerHTML=""):(document.getElementsByClassName("task-title",B)[0].innerHTML="",B.getElementsByTagName("time")[0].innerHTML="",document.getElementsByClassName("task-content",B)[0].innerHTML="")}for(var o=0;o<i.length;o++){var f=document.createElement("li"),p=d[o],r=p.split("^");f.innerHTML=i[o];for(var u=1;u<r.length;u+=2)if(r[u]===s){var N=document.createElement("ul"),C=document.createElement("li");N.setAttribute("class","li-cont"),"finish"===oStorage.getItem(r[u+1])&&(C.style.color="#A2CD5A"),C.innerHTML=r[u+1],N.appendChild(C),function(){C.onclick=function(){displayTaskContent(e,n,arrDescript,this.innerHTML)}}(),f.appendChild(N),y.appendChild(f)}}document.getElementsByClassName("list")[0].appendChild(y)}}else{for(var o=0;4>o;o++)0!==o&&(document.getElementById(arrDescript[o]).style.display="none");document.getElementById(arrDescript[0]).style.display="block";var B=document.getElementById(arrDescript[0]);isGetClass?(B.getElementsByClassName("task-title")[0].innerHTML="",B.getElementsByTagName("time")[0].innerHTML="",B.getElementsByClassName("task-content")[0].innerHTML=""):(document.getElementsByClassName("task-title",B)[0].innerHTML="",B.getElementsByTagName("time")[0].innerHTML="",document.getElementsByClassName("task-content",B)[0].innerHTML="")}}else{for(var o=0;4>o;o++)0!==o&&(document.getElementById(arrDescript[o]).style.display="none");document.getElementById(arrDescript[0]).style.display="block";var B=document.getElementById(arrDescript[0]);isGetClass?(B.getElementsByClassName("task-title")[0].innerHTML="",B.getElementsByTagName("time")[0].innerHTML="",B.getElementsByClassName("task-content")[0].innerHTML=""):(document.getElementsByClassName("task-title",B)[0].innerHTML="",B.getElementsByTagName("time")[0].innerHTML="",document.getElementsByClassName("task-content",B)[0].innerHTML="")}}function uniqArray(e){for(var t=[],n=0;n<e.length;n++)-1==t.indexOf(e[n])&&t.push(e[n]);return t}function squenceTime(e){for(var t=[],n=0;n<e.length;n++){var s=e[n].toString().split("-");t[n]=new Date(s[0],s[1]-1,s[2]).getTime()}t=t.sort();for(var n=0;n<t.length;n++){var a=new Date(t[n]).getFullYear(),l=new Date(t[n]).getMonth()+1,i=new Date(t[n]).getDate();10>l&&(l="0"+l),10>i&&(i="0"+i),t[n]=a+"-"+l+"-"+i}return t}function selectDefaultClass(){for(var e=document.getElementById("sort"),t=e.getElementsByTagName("ul"),n=1;n<t.length;){if(0!==t[n].length&&0!==t[n].getElementsByTagName("li").length){var s=t[n].getElementsByTagName("li");s[0].setAttribute("class","li-select"),t[n].parentNode.setAttribute("class","selected");break}n++}0==document.getElementsByClassName("selected").length&&document.getElementById("ife").setAttribute("class","selected")}function deleteTaskContent(e,t){if(null!==oStorage.getItem(e+"content")&&""!==oStorage.getItem(e+"content")){for(var n=oStorage.getItem(e+"content"),s=n.split("&"),a="",l=1;l<s.length;l++){var i=s[l].split("^");i[0]!==t&&(a=a+"&"+s[l])}oStorage.setItem(e+"content",a)}}function displayTaskContent(e,t,n,s){var a=document.getElementById(n[1]),l=document.getElementById(n[0]),i=e.getAttribute("id"),m=t.getAttribute("id"),r=oStorage.getItem(i+"content"),o=r.split("&");if("finish"!==oStorage.getItem(s)){for(var c=0;4>c;c++)1!==c&&(document.getElementById(n[c]).style.display="none");document.getElementById(n[1]).style.display="block";for(var c=0;c<o.length;c++)if(-1!==o[c].indexOf(m)&&-1!==o[c].indexOf(s)){var g=o[c].split("^");isGetClass?(a.getElementsByClassName("task-title")[0].innerHTML=g[1],a.getElementsByTagName("time")[0].innerHTML=g[2],a.getElementsByClassName("task-content")[0].innerHTML=g[3]):(document.getElementsByClassName("task-title",a)[0].innerHTML=g[1],a.getElementsByTagName("time")[0].innerHTML=g[2],document.getElementsByClassName("task-content",a)[0].innerHTML=g[3])}addEventListenerToDisplay()}else{for(var c=0;4>c;c++)0!==c&&(document.getElementById(n[c]).style.display="none");document.getElementById(n[0]).style.display="block";for(var c=0;c<o.length;c++){var g=o[c].toString().split("^");g[0]===m&&g[1]===s&&(isGetClass?(l.getElementsByClassName("task-title")[0].innerHTML=g[1],l.getElementsByTagName("time")[0].innerHTML=g[2],l.getElementsByClassName("task-content")[0].innerHTML=g[3]):(document.getElementsByClassName("task-title",l)[0].innerHTML=g[1],l.getElementsByTagName("time")[0].innerHTML=g[2],document.getElementsByClassName("task-content",l)[0].innerHTML=g[3]))}}}function displayTaskNum(e){var t=document.getElementById(e),n=0;if(null!==oStorage.getItem(e)&&""!==oStorage.getItem(e)){for(var s=oStorage.getItem(e),a=s.split("$"),l=1;l<a.length;l++){var i=getTaskNum(e,a[l]);n+=i}isGetClass?t.getElementsByClassName("all-num")[0].innerHTML="("+n+")":document.getElementsByClassName("all-num",t)[0].innerHTML="("+n+")"}else isGetClass?t.getElementsByClassName("all-num")[0].innerHTML="(0)":document.getElementsByClassName("all-num",t)[0].innerHTML="(0)";return n}function getTaskNum(e,t){var n=oStorage.getItem(e+"content"),s=0;if(null!==n&&""!==n)for(var a=n.split("&"),l=1;l<a.length;l++)a[l].split("^")[0]===t&&s++;return s}function updateTaskNum(e,t){var n=document.getElementById(e),s=document.getElementById(t);if(isGetClass)var a=n.getElementsByClassName("all-num")[0].innerHTML;else var a=document.getElementsByClassName("all-num",n)[0].innerHTML;var l=s.getElementsByTagName("span")[0].innerHTML,i=parseInt(a.split("(")[1].split(")")[0])+1,m=parseInt(l.split("(")[1].split(")")[0])+1;isGetClass?n.getElementsByClassName("all-num")[0].innerHTML="("+i+")":document.getElementsByClassName("all-num",n)[0].innerHTML="("+i+")",s.getElementsByTagName("span")[0].innerHTML="("+m+")"}function displayAllTaskNum(){for(var e=document.getElementById("whole-num"),t=displayTaskNum("ife"),n=displayTaskNum("graduation"),s=displayTaskNum("association"),a=displayTaskNum("family"),l=displayTaskNum("other"),i=0,m=[t,n,s,a,l],r=0;r<m.length;r++)i+=m[r];e.innerHTML=i}function addEventListenerToDisplay(){var e=document.getElementById("task-display"),t=e.getElementsByTagName("img");if(isGetClass)var n=e.getElementsByClassName("task-title")[0].innerHTML,s=e.getElementsByTagName("time")[0].innerHTML,a=e.getElementsByClassName("task-content")[0].innerHTML;else var n=document.getElementsByClassName("task-title",e)[0].innerHTML,s=e.getElementsByTagName("time")[0].innerHTML,a=document.getElementsByClassName("task-content",e)[0].innerHTML;t[0].onclick=function(){if(isGetClass)var t=e.getElementsByClassName("task-title")[0].innerHTML,n=e.getElementsByTagName("time")[0].innerHTML,s=e.getElementsByClassName("task-content")[0].innerHTML;else var t=document.getElementsByClassName("task-title",e)[0].innerHTML,n=e.getElementsByTagName("time")[0].innerHTML,s=document.getElementsByClassName("task-content",e)[0].innerHTML;var a=confirm("是否确认完成？");if(a){oStorage.setItem(t,"finish");for(var l=0;4>l;l++)document.getElementById(arrDescript[l]).style.display="none";document.getElementById(arrDescript[0]).style.display="block";var i=document.getElementById("task-finish");isGetClass?(i.getElementsByClassName("task-title")[0].innerHTML=t,i.getElementsByTagName("time")[0].innerHTML=n,i.getElementsByClassName("task-content")[0].innerHTML=s):(document.getElementsByClassName("task-title",i)[0].innerHTML=t,i.getElementsByTagName("time")[0].innerHTML=n,document.getElementsByClassName("task-content",i)[0].innerHTML=s),clearTaskList(),loadAllSortTask();for(var l=0;4>l;l++)document.getElementById(arrDescript[l]).style.display="none";document.getElementById(arrDescript[0]).style.display="block"}},t[1].onclick=function(){for(var e=document.getElementsByClassName("selected")[0],t=document.getElementsByClassName("li-select")[0],l=(e.getAttribute("id"),t.getAttribute("id"),document.getElementById("task-edit")),i=0;4>i;i++)document.getElementById(arrDescript[i]).style.display="none";if(document.getElementById(arrDescript[2]).style.display="block",isGetClass){var m=l.getElementsByClassName("sure")[0],r=l.getElementsByClassName("quit")[0];l.getElementsByClassName("task-title")[0].value=n,l.getElementsByClassName("time")[0].value=s,l.getElementsByClassName("task-content")[0].value=a}else{var m=document.getElementsByClassName("sure",l)[0],r=document.getElementsByClassName("quit",l)[0];document.getElementsByClassName("task-title",l)[0].value=n,document.getElementsByClassName("time",l)[0].value=s,document.getElementsByClassName("task-content",l)[0].value=a}m.onclick=function(){if(isGetClass)var e=l.getElementsByClassName("task-title")[0].value,t=l.getElementsByClassName("time")[0].value,s=l.getElementsByClassName("task-content")[0].value;else var e=document.getElementsByClassName("task-title",l)[0].value,t=document.getElementsByClassName("time",l)[0].value,s=document.getElementsByClassName("task-content",l)[0].value;var a=isInputTaskRight(e,s);if(isRightDate(t)&&a){var i=document.getElementsByClassName("selected")[0],m=document.getElementsByClassName("li-select")[0],r=oStorage.getItem(i.getAttribute("id")+"content");null===r&&(r="");for(var o=oStorage.getItem(i.getAttribute("id")+"content").split("&"),c="",g=1;g<o.length;g++)o[g].split("^")[1]===n?(o[g]=m.getAttribute("id")+"^"+e+"^"+t+"^"+s,c=c+"&"+o[g]):c=c+"&"+o[g];oStorage.setItem(i.getAttribute("id")+"content",c);for(var g=0;4>g;g++)1!==g&&(document.getElementById(arrDescript[g]).style.display="none");document.getElementById(arrDescript[1]).style.display="block";var d=document.getElementById(arrDescript[1]);isGetClass?(d.getElementsByClassName("task-title")[0].innerHTML=e,d.getElementsByTagName("time")[0].innerHTML=t,d.getElementsByClassName("task-content")[0].innerHTML=s):(document.getElementsByClassName("task-title",d)[0].innerHTML=e,document.getElementsByTagName("time",d)[0].innerHTML=t,document.getElementsByClassName("task-content",d)[0].innerHTML=s);for(var u=document.getElementsByClassName("li-cont"),g=0;g<u.length;g++)if(0!==u[g].getElementsByTagName("li").length)for(var y=u[g].getElementsByTagName("li"),E=0;E<y.length;E++)if(y[E].innerHTML===n){y[E].innerHTML=e;break}}},r.onclick=function(){for(var e=0;4>e;e++)document.getElementById(arrDescript[e]).style.display="none";document.getElementById(arrDescript[2]).style.display="block",isGetClass?(l.getElementsByClassName("task-title")[0].value=n,l.getElementsByClassName("time")[0].value=s,l.getElementsByClassName("task-content")[0].content=""):(document.getElementsByClassName("task-title",l)[0].value=n,document.getElementsByClassName("time",l)[0].value=s,document.getElementsByClassName("task-content",l)[0].content="");for(var e=0;4>e;e++)document.getElementById(arrDescript[e]).style.display="none";document.getElementById(arrDescript[1]).style.display="block"}}}function addEventListenerToSort(){var e=[];e[0]=document.getElementById("ife"),e[1]=document.getElementById("graduation"),e[2]=document.getElementById("association"),e[3]=document.getElementById("family"),e[4]=document.getElementById("other");for(var t=0;5>t;t++)!function(t){e[t].onclick=function(){var n=this;isGetClass?(document.getElementById("ife").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),document.getElementById("graduation").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),document.getElementById("association").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),document.getElementById("family").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),document.getElementById("other").getElementsByClassName("li-img")[0].setAttribute("src","images/folder.png"),this.getElementsByClassName("li-img")[0].setAttribute("src","images/folder_white.png")):(document.getElementsByClassName("li-img",document.getElementById("ife"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",document.getElementById("graduation"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",document.getElementById("association"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",document.getElementById("family"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",document.getElementById("other"))[0].setAttribute("src","images/folder.png"),document.getElementsByClassName("li-img",n)[0].setAttribute("src","images/folder_white.png")),0!==document.getElementById("ife").getElementsByTagName("li").length?deleteClassificationData("ife"):0!==document.getElementById("graduation").getElementsByTagName("li").length?deleteClassificationData("graduation"):0!==document.getElementById("association").getElementsByTagName("li").length?deleteClassificationData("association"):0!==document.getElementById("family").getElementsByTagName("li").length?deleteClassificationData("family"):0!==document.getElementById("other").getElementsByTagName("li").length&&deleteClassificationData("other"),0===this.getElementsByTagName("li").length&&loadClassificationData(e[t].getAttribute("id"));var s=document.getElementsByClassName("selected");if(0!==s.length){var a=s[0],l=document.getElementsByClassName("li-select");a.setAttribute("class",""),this.setAttribute("class","selected"),0!==l.length&&l[0].setAttribute("class",""),0!==this.getElementsByTagName("li").length&&this.getElementsByTagName("li")[0].setAttribute("class","li-select")}else this.setAttribute("class","selected");clearTaskList(),loadAllSortTask()}}(t)}function deleteClassificationData(e){for(var t=document.getElementById(e),n=t.getElementsByTagName("li");0!==n.length;)t.getElementsByTagName("ul")[0].removeChild(n[0])}function addEventListenerToButton(){var e=document.getElementById("all-task"),t=document.getElementById("not-finish"),n=document.getElementById("has-finish");e.onclick=function(){var e=document.getElementsByClassName("checked")[0];e.setAttribute("class",""),this.setAttribute("class","checked"),clearTaskList(),loadAllSortTask()},t.onclick=function(){var e=document.getElementsByClassName("checked")[0];e.setAttribute("class",""),this.setAttribute("class","checked"),clearTaskList(),loadHasOrNotFinishTask(1)},n.onclick=function(){var e=document.getElementsByClassName("checked")[0];e.setAttribute("class",""),this.setAttribute("class","checked"),clearTaskList(),loadHasOrNotFinishTask(0)}}function loadHasOrNotFinishTask(e){var t=document.getElementsByClassName("selected")[0];if(0!==document.getElementsByClassName("li-select").length){var n=document.getElementsByClassName("li-select")[0],s=n.getAttribute("id"),a=oStorage.getItem(t.getAttribute("id")+"content");if(null!==a&&""!==a&&0!==a.length){for(var l=a.split("&"),i=[],m=[],r=[],o=1;o<l.length;o++){var c=l[o].split("^");i[o-1]=c[2],m[o-1]=c[1],r[o-1]=c[0]}var g=i,d=[];i=uniqArray(i),i=squenceTime(i);for(var o=0;o<i.length;o++){d[o]=i[o];for(var u=0;u<m.length;u++)i[o]===g[u]&&(d[o]=d[o]+"^"+r[u]+"^"+m[u])}for(var y=document.getElementsByClassName("li-time")[0],E="",o=0;o<d.length;o++)if(d[o].split("^")[1]===s){E=d[o].split("^")[2];break}if(""!==E)displayTaskContent(t,n,arrDescript,E);else{for(var o=0;4>o;o++)1!==o&&(document.getElementById(arrDescript[o]).style.display="none");document.getElementById(arrDescript[1]).style.display="block";var B=document.getElementById(arrDescript[1]);isGetClass?(B.getElementsByClassName("task-title")[0].innerHTML="",B.getElementsByTagName("time")[0].innerHTML="",B.getElementsByClassName("task-content")[0].innerHTML=""):(document.getElementsByClassName("task-title",B)[0].innerHTML="",document.getElementsByTagName("time",B)[0].innerHTML="",document.getElementsByClassName("task-content",B)[0].innerHTML="")}for(var f=!1,o=0;o<i.length;o++){var p=document.createElement("li"),N=d[o],r=N.split("^");if(0===e){for(var u=1;u<r.length;u+=2)if(r[u]===s&&"finish"===oStorage.getItem(r[u+1])){p.innerHTML=i[o];var C=document.createElement("ul"),T=document.createElement("li");C.setAttribute("class","li-cont"),T.innerHTML=r[u+1],C.appendChild(T),function(){T.onclick=function(){displayTaskContent(t,n,arrDescript,this.innerHTML)}}(),p.appendChild(C),y.appendChild(p),f||(displayTaskContent(t,n,arrDescript,r[u+1]),f=!0)}if(!f){for(var o=0;4>o;o++)0!==o&&(document.getElementById(arrDescript[o]).style.display="none");document.getElementById(arrDescript[0]).style.display="block";var v=document.getElementById(arrDescript[0]);isGetClass?(v.getElementsByClassName("task-title")[0].innerHTML="",v.getElementsByTagName("time")[0].innerHTML="",v.getElementsByClassName("task-content")[0].innerHTML=""):(document.getElementsByClassName("task-title",v)[0].innerHTML="",document.getElementsByTagName("time",v)[0].innerHTML="",document.getElementsByClassName("task-content",v)[0].innerHTML="")}}if(1===e){for(var u=1;u<r.length;u+=2)if(r[u]===s&&(null===oStorage.getItem(r[u+1])||""===oStorage.getItem(r[u+1]))){p.innerHTML=i[o];var C=document.createElement("ul"),T=document.createElement("li");C.setAttribute("class","li-cont"),T.innerHTML=r[u+1],C.appendChild(T),function(){T.onclick=function(){displayTaskContent(t,n,arrDescript,this.innerHTML)}}(),p.appendChild(C),y.appendChild(p),f||(displayTaskContent(t,n,arrDescript,r[u+1]),f=!0)}if(!f){for(var o=0;4>o;o++)0!==o&&(document.getElementById(arrDescript[o]).style.display="none");document.getElementById(arrDescript[0]).style.display="block";var v=document.getElementById(arrDescript[0]);isGetClass?(v.getElementsByClassName("task-title")[0].innerHTML="",v.getElementsByTagName("time")[0].innerHTML="",v.getElementsByClassName("task-content")[0].innerHTML=""):(document.getElementsByClassName("task-title",v)[0].innerHTML="",document.getElementsByTagName("time",v)[0].innerHTML="",document.getElementsByClassName("task-content",v)[0].innerHTML="")}}}document.getElementsByClassName("list")[0].appendChild(y)}}}window.onload=function(){top.location!=location&&(top.location=self.location);var e=document.getElementById("new-sort"),t=document.getElementById("new-task");e.onclick=addNewSort,t.onclick=addNewTask,loadClassificationData("ife")&&loadClassificationData("graduation")&&loadClassificationData("association")&&loadClassificationData("family")&&loadClassificationData("other"),displayAllTaskNum(),selectDefaultClass(),addEventListenerToSort(),loadAllSortTask(),addEventListenerToButton()};var oStorage=window.localStorage,arrDescript=["task-finish","task-display","task-edit","task-new"];if(document.getElementsByClassName||(document.getElementsByClassName=function(e,t){for(var n=(t||document).getElementsByTagName("*"),s=new Array,a=0;a<n.length;a++)for(var l=n[a],i=l.className.split(" "),m=0;m<i.length;m++)if(i[m]==e){s.push(l);break}return s}),void 0===getFuncParameters(document.getElementsByClassName))var isGetClass=!0;else var isGetClass=!1;Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1});